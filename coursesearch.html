<!DOCTYPE html>
<html>
 <head>
   <title>Registrar></title>
  </head>
 <body>
   {% include 'header.html' %}
  <h2>Class Search</h2>
   <hr>
   <form method = "get">
     <table>
        <tr>
        <td align="right">Dept:</td>
        <td><input type="text" name="dept" id = "deptInput" autofocus><br></td>
        </tr>
 
        <tr>
        <td align="right">Number:</td>
        <td>
           <input type="text" name="num" id = "numInput" autofocus><br>
        </td>
        </tr>
 
        <tr>
        <td align="right">Area:</td>
        <td><input type=text name="area" id = "areaInput" autofocus><br></td>
        </tr>
 
        <tr>
        <td align="right">Title:</td>
        <td>
           <input type="text" name="title" id = "titleInput" autofocus><br>
        </td>
        </tr>
 
        <tr>
        <td></td>
        </tr>
 
     </table>
  </form>
   <hr>
  
   <p id="resultsParagraph"></p>
  
   <script src= "https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
      
   <script>
       'use strict';
 
       function handleResponse(response) {
           $('#resultsParagraph').html(response);
       }
 
       let request = null;
 
       function getResults() {
          
           let dept = $('#deptInput').val();
           dept = encodeURIComponent(dept);
           let num = $('#numInput').val();
           num = encodeURIComponent(num);
           let area = $('#areaInput').val();
           area = encodeURIComponent(area);
           let title = $('#titleInput').val();
           title = encodeURIComponent(title);
 
           let url = '/course_results?dept=' + dept
           url += '&num=' + num;
           url += '&area=' + area;
           url += '&title=' + title;
          
           if (request != null)
               request.abort();
          
          
           request = $.ajax(
               {
                   type: 'GET',
                   url: url,
                   success: handleResponse
               }
           );
       }
 
       function setup() {
           $('#deptInput').on('input', getResults)
           $('#numInput').on('input', getResults)
           $('#areaInput').on('input', getResults)
           $('#titleInput').on('input', getResults)
           getResults()
       }
 
       $('document').ready(setup);
 
   </script>
    
   </body>
</html>